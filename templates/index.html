<!DOCTYPE html>
<html lang="en">
<head>
    <title>Image & Audio Generation</title>
</head>
<body>
<h1>Image to Audio</h1>
<div class="container">
    <div class="image-upload">
        <button id="upload-button">Click to Upload Image</button>
        <p id="upload-message"></p>
        <img id="upload-image" src="/static/default-input-image.jpg" alt="Input image">
    </div>

    <div class="style-selection">
        <label for="style">Select Style:</label>
        <select id="style" name="style">
            <option value="">Choose a style...</option>
            <option value="van_gogh">Van Gogh</option>
            <option value="picasso">Picasso</option>
        </select>
    </div>

    <button id="transform-button">Transform</button>

    <div class="output-image">
        <img id="output-image" src="/static/default-input-image.jpg" alt="Output Image">
    </div>
</div>

<script>
    const uploadButton = document.getElementById("upload-button");
    const uploadMessage = document.getElementById("upload-message");

    uploadButton.addEventListener("click", function() {
      const formData = new FormData();
      const fileInput = document.getElementById("image");
      const selectedFile = fileInput.files[0];

      if (!selectedFile) {
        uploadMessage.textContent = "Please select an image to upload.";
        return;
      }

      formData.append("image", selectedFile);

      fetch("/upload", {
        method: "POST",
        body: formData,
      })
      .then(response => response.json())
      .then(data => {
        uploadMessage.textContent = data.message;
        // You can also update the src attribute of the output image here if the response contains the path to the transformed image (refer to Flask implementation)
      })
      .catch(error => {
        console.error("Error uploading image:", error);
        uploadMessage.textContent = "Error uploading image. Please try again.";
      });
    });
</script>

</body>
</html>